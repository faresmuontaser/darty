<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Darty - Dart & Flutter Tutor</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" />
</head>
<body>
    <div id="appContainer" class="app-container">
        <!-- Gemini-style Sidebar -->
        <aside id="sidebar" class="gemini-sidebar">
            <div class="sidebar-header">
                <button id="sidebarToggle" class="icon-btn" data-i18n-title="toggle_sidebar">
                    <span class="material-symbols-rounded">menu</span>
                </button>
                <div class="new-chat-wrapper">
                    <button id="railNewChatBtn" class="new-chat-btn">
                        <span class="material-symbols-rounded">border_color</span>
                        <span class="btn-label" data-i18n="new_chat">محادثة جديدة</span>
                    </button>
                </div>
            </div>

            <div class="sidebar-body">
                <div class="history-section">
                    <h3 class="section-label" data-i18n="history_label">المحفوظات</h3>
                    <div id="historyList" class="history-list"></div>
                </div>
            </div>

            <div class="sidebar-footer">
                <button id="settingsBtn" class="footer-btn" data-i18n-title="settings_title">
                    <span class="material-symbols-rounded">settings</span>
                    <span class="btn-label" data-i18n="settings_title">الإعدادات</span>
                </button>
            </div>
            
            <div id="sidebarResizeHandle" class="resize-handle"></div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- M3 Linear Progress -->
            <div id="topProgressBar" class="linear-progress" style="opacity: 0;">
                <div class="progress-bar-indicator"></div>
            </div>

            <header class="app-header-container">
                <div class="app-header floating-header">
                    <div id="headerTitleArea" class="header-title-container">
                        <span class="material-symbols-rounded" style="font-size: 20px; opacity: 0.6;">chat_bubble</span>
                        <span id="headerChatTitle" class="header-chat-title" contenteditable="true" spellcheck="false">Darty</span>
                    </div>
                </div>
            </header>

            <div class="chat-container" id="chatMessages">
                <!-- Chat content will be rendered here -->
            </div>

            <!-- Fixed Input Bar -->
            <footer class="app-footer">
                <div class="input-wrapper">
                    <textarea 
                        id="chatInput" 
                        placeholder="اكتب رسالتك لـ Darty..." 
                        rows="1"
                    ></textarea>
                    <button id="stopBtn" class="stop-button" style="display: none;" data-i18n-title="stop_title">
                        <span class="material-symbols-rounded">stop</span>
                    </button>
                    <button id="sendBtn" class="send-button" data-i18n-title="send_title">
                        <span class="material-symbols-rounded">arrow_upward</span>
                    </button>
                </div>
            </footer>
        </main>
    </div>

    <!-- M3 Settings FAB Menu -->
    <div id="settingsOverlay" class="settings-fab-menu">
        <div class="fab-menu-items">
            <button id="themeToggleBtnOverlay" class="mini-fab" data-i18n-title="theme_title">
                <span id="themeIcon" class="material-symbols-rounded">light_mode</span>
            </button>
            <button id="langToggleBtnOverlay" class="mini-fab" data-i18n-title="lang_title">
                <span id="langTextOverlay" style="font-size: 10px; font-weight: 900;">EN</span>
            </button>
            <button id="refreshDocsBtnOverlay" class="mini-fab" data-i18n-title="sync">
                <span class="material-symbols-rounded">sync</span>
            </button>
            <button id="clearCacheBtnOverlay" class="mini-fab" data-i18n-title="clear">
                <span class="material-symbols-rounded">delete</span>
            </button>
            <button id="closeSettingsBtn" class="mini-fab close-fab">
                <span class="material-symbols-rounded">close</span>
            </button>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="spinner"></div>
    </div>

    <script src="script.js"></script>
</body>
</html>
